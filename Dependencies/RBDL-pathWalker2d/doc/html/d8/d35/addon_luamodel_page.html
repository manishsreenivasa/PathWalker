<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Rigid Body Dynamics Library: Addon: rbdl_luamodel</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Rigid Body Dynamics Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d8/d35/addon_luamodel_page.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Addon: rbdl_luamodel </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="luamodel_introduction"></a>
Lua Models</h1>
<p>The Addon LuaModel allows to load <a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html">Models</a> that are specified as Lua scripts. <a href="http://www.lua.org">Lua</a> is an open-source light-weight scripting language (<a href="http://www.lua.org">http://www.lua.org</a>). This addon is not enabled by default and one has to enable it by setting BUILD_ADDON_LUAMODEL to true in when configuring the RBDL with CMake.</p>
<p>This addon comes with a standalone utility that can show various information of a lua model such as degree of freedom overview or model hierarchy. It is located in addons/luamodel/rbdl_luamodel_test. Use the -h switch to see available options.</p>
<p>Note: this addon is not even remotely as thoroughly tested as the RBDL itself so please use it with some suspicion.</p>
<h1><a class="anchor" id="luamodel_format"></a>
Format Overview</h1>
<p>Models have to be specified as a specially formatted Lua table which must be returned by the script, i.e. if the model is specified in the table "model = { ... }" the script has to return this when executed. Within the returned table, rbdl_luamodel goes through the table "frames" and builds the model from the individual Frame Information Tables (see further down for more information about those).</p>
<p>A valid file could look like this:</p>
<div class="fragment"><div class="line">model = {</div>
<div class="line">  frames = {</div>
<div class="line">    {</div>
<div class="line">      &lt;frame 1 information table&gt;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      &lt;frame 2 information table&gt;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">return</span> model</div>
</div><!-- fragment --><p>Apart from the frames you can also specify gravity in the model file.</p>
<p>Example: </p>
<div class="fragment"><div class="line">model = {</div>
<div class="line">  gravity = {0., 0., -9.81}</div>
<div class="line"></div>
<div class="line">  frames = {</div>
<div class="line">  ...</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The table frames must contain all Frame Information Tables as a list and individual tables must <em>not</em> be specified with a key, i.e. <div class="fragment"><div class="line">frames = {</div>
<div class="line">  some_frame = {</div>
<div class="line">    ...</div>
<div class="line">  },</div>
<div class="line">  {</div>
<div class="line">    ..</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> is not possible as Lua does not retain the order of the individual frames when an explicit key is specified.</dd></dl>
<h1><a class="anchor" id="luamodel_frame_table"></a>
Frame Information Table</h1>
<p>The Frame Information Table is searched for values needed to call <a class="el" href="../../d7/d19/struct_rigid_body_dynamics_1_1_model.html#a51525da771a094a0a007b1384a61f196" title="Connects a given body to the model. ">Model::AddBody()</a>. The following fields are used by rbdl_luamodel (everything else is ignored):</p>
<dl class="section user"><dt>name (required, type: string):</dt><dd>Name of the body that is being added. This name must be unique.</dd></dl>
<dl class="section user"><dt>parent (required, type: string):</dt><dd>If the value is "ROOT" the parent frame of this body is assumed to be the base coordinate system, otherwise it must be the exact same string as was used for the "name"-field of the parent frame.</dd></dl>
<dl class="section user"><dt>body (optional, type: table)</dt><dd>Specification of the dynamical parameters of the body. It uses the values (if existing): <div class="fragment"><div class="line">mass (scalar value, <span class="keywordflow">default</span> 1.),</div>
<div class="line">com (3-d vector, <span class="keywordflow">default</span>:  (0., 0., 0.))</div>
<div class="line">inertia (3x3  matrix, default: identity matrix)</div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>to create a <a class="el" href="../../da/dd2/struct_rigid_body_dynamics_1_1_body.html">RigidBodyDynamics::Body</a>.</dd></dl>
<dl class="section user"><dt>joint (optional, type: table)</dt><dd>Specifies the type of joint, fixed or up to 6 degrees of freedom. Each entry in the joint table should be a 6-d that defines the motion subspace of a single degree of freedom. </dd></dl>
<dl class="section user"><dt></dt><dd>Default joint type is a fixed joint that attaches the body rigidly to its parent. </dd></dl>
<dl class="section user"><dt></dt><dd>3-DoF joints are described by using strings. The following 3-DoF joints are available:</dd></dl>
<ul>
<li>"JointTypeSpherical": for singularity-free spherical joints</li>
<li>"JointTypeEulerZYX": Euler ZYX joint</li>
<li>"JointTypeEulerXYZ": Euler XYZ joint</li>
<li>"JointTypeEulerYXZ": Euler YXZ joint</li>
<li>"JointTypeTranslationXYZ": Free translational joint</li>
</ul>
<dl class="section user"><dt></dt><dd>Examples: <div class="fragment"><div class="line">joint_fixed = {}</div>
<div class="line">joint_translate_x = { {0., 0., 0., 1., 0., 0.} }</div>
<div class="line">joint_translate_xy = { </div>
<div class="line">  {0., 0., 0., 1., 0., 0.},</div>
<div class="line">  {0., 0., 0., 0., 1., 0.}</div>
<div class="line">}</div>
<div class="line">joint_rotate_zyx = {</div>
<div class="line">  {0., 0., 1., 0., 0., 0.},</div>
<div class="line">  {0., 1., 0., 0., 0., 0.},</div>
<div class="line">  {1., 0., 0., 0., 0., 0.},</div>
<div class="line">}</div>
<div class="line">joint_rotate_euler_zyx = { <span class="stringliteral">&quot;JointTypeEulerZYX&quot;</span> }</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>joint_frame (optional, type: table)</dt><dd>Specifies the origin of the joint in the frame of the parent. It uses the values (if existing): <div class="fragment"><div class="line">r (3-d vector, <span class="keywordflow">default</span>: (0., 0., 0.))</div>
<div class="line">E (3x3 matrix, default: identity matrix)</div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>for which r is the translation and E the rotation of the joint frame</dd></dl>
<h1><a class="anchor" id="luamodel_example"></a>
Example</h1>
<p>Here is an example of a model: </p>
<div class="fragment"><div class="line">--[[</div>
<div class="line">--  This is an example model <span class="keywordflow">for</span> the RBDL addon luamodel. You need to</div>
<div class="line">--  enable RBDL_BUILD_ADDON_LUAMODEL to be able to use <span class="keyword">this</span> file.</div>
<div class="line">--]]</div>
<div class="line"></div>
<div class="line">print (<span class="stringliteral">&quot;This is some output from the model file&quot;</span>)</div>
<div class="line"></div>
<div class="line">inertia = { </div>
<div class="line">  {1.1, 0.1, 0.2},</div>
<div class="line">  {0.3, 1.2, 0.4},</div>
<div class="line">  {0.5, 0.6, 1.3}</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">pelvis = { mass = 9.3, com = { 1.1, 1.2, 1.3}, inertia = inertia }</div>
<div class="line">thigh = { mass = 4.2, com = { 1.1, 1.2, 1.3}, inertia = inertia }</div>
<div class="line">shank = { mass = 4.1, com = { 1.1, 1.2, 1.3}, inertia = inertia }</div>
<div class="line">foot = { mass = 1.1, com = { 1.1, 1.2, 1.3}, inertia = inertia }</div>
<div class="line"></div>
<div class="line">bodies = {</div>
<div class="line">  pelvis = pelvis,</div>
<div class="line">  thigh_right = thigh,</div>
<div class="line">  shank_right = shank,</div>
<div class="line">  thigh_left = thigh,</div>
<div class="line">  shank_left = shank</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">joints = {</div>
<div class="line">  freeflyer = {</div>
<div class="line">    { 0., 0., 0., 1., 0., 0.},</div>
<div class="line">    { 0., 0., 0., 0., 1., 0.},</div>
<div class="line">    { 0., 0., 0., 0., 0., 1.},</div>
<div class="line">    { 0., 0., 1., 0., 0., 0.},</div>
<div class="line">    { 0., 1., 0., 0., 0., 0.},</div>
<div class="line">    { 1., 0., 0., 0., 0., 0.}</div>
<div class="line">  },</div>
<div class="line">  spherical_zyx = {</div>
<div class="line">    { 0., 0., 1., 0., 0., 0.},</div>
<div class="line">    { 0., 1., 0., 0., 0., 0.},</div>
<div class="line">    { 1., 0., 0., 0., 0., 0.}</div>
<div class="line">  },</div>
<div class="line">  rotational_y = {</div>
<div class="line">    { 0., 1., 0., 0., 0., 0.}</div>
<div class="line">  },</div>
<div class="line">  fixed = {}</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">model = {</div>
<div class="line">  gravity = {0., 0., -9.81},</div>
<div class="line"></div>
<div class="line">  frames = {</div>
<div class="line">    {</div>
<div class="line">      name = <span class="stringliteral">&quot;pelvis&quot;</span>,</div>
<div class="line">      parent = <span class="stringliteral">&quot;ROOT&quot;</span>,</div>
<div class="line">      body = bodies.pelvis,</div>
<div class="line">      joint = joints.freeflyer,</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      name = <span class="stringliteral">&quot;thigh_right&quot;</span>,</div>
<div class="line">      parent = <span class="stringliteral">&quot;pelvis&quot;</span>,</div>
<div class="line">      body = bodies.thigh_right,</div>
<div class="line">      joint = joints.spherical_zyx,</div>
<div class="line">      joint_frame = {</div>
<div class="line">        r = {0.0, -0.15, 0.},</div>
<div class="line">        E = {</div>
<div class="line">          {1., 0., 0.},</div>
<div class="line">          {0., 1., 0.},</div>
<div class="line">          {0., 0., 0.}</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      name = <span class="stringliteral">&quot;shank_right&quot;</span>,</div>
<div class="line">      parent = <span class="stringliteral">&quot;thigh_right&quot;</span>,</div>
<div class="line">      body = bodies.thigh_right,</div>
<div class="line">      joint = joints.rotational_y,</div>
<div class="line">      joint_frame = {</div>
<div class="line">        r = {0.0, 0., -0.42},</div>
<div class="line">      },</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      name = <span class="stringliteral">&quot;foot_right&quot;</span>,</div>
<div class="line">      parent = <span class="stringliteral">&quot;shank_right&quot;</span>,</div>
<div class="line">      body = bodies.thigh_right,</div>
<div class="line">      joint_frame = {</div>
<div class="line">        r = {0.0, 0., -0.41}</div>
<div class="line">      },</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      name = <span class="stringliteral">&quot;thigh_left&quot;</span>,</div>
<div class="line">      parent = <span class="stringliteral">&quot;pelvis&quot;</span>,</div>
<div class="line">      body = bodies.thigh_left,</div>
<div class="line">      joint = joints.spherical_zyx,</div>
<div class="line">      joint_frame = {</div>
<div class="line">        r = {0.0, 0.15, 0.},</div>
<div class="line">        E = {</div>
<div class="line">          {1., 0., 0.},</div>
<div class="line">          {0., 1., 0.},</div>
<div class="line">          {0., 0., 0.}</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      name = <span class="stringliteral">&quot;shank_left&quot;</span>,</div>
<div class="line">      parent = <span class="stringliteral">&quot;thigh_left&quot;</span>,</div>
<div class="line">      body = bodies.thigh_left,</div>
<div class="line">      joint = joints.rotational_y,</div>
<div class="line">      joint_frame = {</div>
<div class="line">        r = {0.0, 0., -0.42},</div>
<div class="line">      },</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">      name = <span class="stringliteral">&quot;foot_left&quot;</span>,</div>
<div class="line">      parent = <span class="stringliteral">&quot;shank_left&quot;</span>,</div>
<div class="line">      body = bodies.thigh_left,</div>
<div class="line">      joint_frame = {</div>
<div class="line">        r = {0.0, 0., -0.41},</div>
<div class="line">      },</div>
<div class="line">    },</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">return</span> model</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Mainpage</a></li>
    <li class="footer">Generated on Wed Jul 27 2016 14:00:33 for Rigid Body Dynamics Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
